<!DOCTYPE html>
<html>
    <head>
        <title>HTML-ASSIGNMENT-Q1</title> 
    </head>
    <body>
      <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)">
        <svg width="600" height="300" >
            <circle  cx="150" cy="130" r="130"  fill="yellow"/>
            <circle  cx="450" cy="130" r="130"  fill="green" />
          </svg>
        </div>
        <img dragabble="true" src="wipro-esig.gif" ondragstart="drag(event)" id="drag1" class="draggable"  ondragend="" width="250" height="150"> 
        <p>Click the button to get your current location coordinates.</p>

<button style="background-color: #FFFFF" onclick="getLocation()">Locate Me</button>

<h4 id="demo"></h4>
    </body>
    <script>
      function allowDrop(ev) {
       ev.preventDefault();
     }

     function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
     }

     function drop(ev) {
       ev.preventDefault();
       var data = ev.dataTransfer.getData("text"),
           img = document.getElementById(data),
           imgSrc = img.getAttribute('src'),
           imgW = img.getAttribute('width'),
           imgH = img.getAttribute('height'),
          
           imgX = ev.target.getAttribute('cx') - ev.target.getAttribute('r');

       ev.target.parentElement.innerHTML += '<image xlink:href="' + imgSrc + '" x="' + imgX + '" y="60" width="' + imgW + 'px" height="' + imgH + 'px"/>';
       img.parentNode.removeChild(img);
     }

     var xy = document.getElementById("demo");

function getLocation() {
if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(showPosition, showError);
} else { 
xy.innerHTML = "Geolocation is not supported by this browser.";
}
}

function showPosition(position) {
  xy.innerHTML = "Current Location:<br>Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;
  var coordinate1= position.coords.latitude;
  var coordinate2= position.coords.longitude;
  var opt={"coord1":coordinate1,"coord2":coordinate2};
  var getval=localStorage.getItem("value");
  if(getval===null){    
     var str=JSON.stringify(opt);
      localStorage.setItem("value",str);
      var getval=localStorage.getItem("value");
      var obj=JSON.parse(getval);
      alert("Stored user location data"+"Latitude value : "+ obj.coord1+"  Longitutde value: "+obj.coord2);
    }
  else{     
      var obj=JSON.parse(getval);
      alert("Previous Stored user location data"+"Latitude value : "+ obj.coord1+"  Longitutde value: "+obj.coord2);
      var str=JSON.stringify(opt); 
      localStorage.setItem("value",str);
    }
}

function showError(error) {
switch(error.code) {
case error.PERMISSION_DENIED:
xy.innerHTML = "User denied the request for Geolocation."
break;
case error.POSITION_UNAVAILABLE:
xy.innerHTML = "Location information is unavailable."
break;
case error.TIMEOUT:
xy.innerHTML = "The request to get user location timed out."
break;
case error.UNKNOWN_ERROR:
xy.innerHTML = "An unknown error occurred."
break;
}
}
 </script>
</html>